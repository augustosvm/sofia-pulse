# SonarCloud Configuration - Sofia Pulse
# Analisa apenas cÃ³digo ativo (16.5k linhas)
# Ignora legacy, migrations, configs

sonar.projectKey=augustosvm_sofia-pulse
sonar.organization=ti-especialistas

sonar.projectName=Sofia Pulse - Active Codebase
sonar.projectVersion=5.0
sonar.python.version=3.10

# ðŸŸ¢ CÃ“DIGO ATIVO - Apenas o que estÃ¡ em produÃ§Ã£o
sonar.sources=\
  scripts/collect-*.py,\
  scripts/shared/geo_helpers.py,\
  scripts/shared/org_helpers.py,\
  scripts/shared/funding_helpers.py,\
  scripts/utils/sofia_whatsapp_integration.py,\
  scripts/collect.ts,\
  scripts/generate-crontab.ts,\
  scripts/collectors,\
  scripts/configs

# ðŸ”´ EXCLUSÃ•ES - O que NÃƒO analisar
sonar.exclusions=\
  **/.workspace/**,\
  **/legacy/**,\
  **/docs/**,\
  **/migrations/**,\
  **/sql/**,\
  **/scripts/automation/**,\
  **/db/**,\
  **/*.md,\
  **/*.json,\
  **/*.txt,\
  **/*.sh,\
  **/*.sql,\
  **/node_modules/**,\
  **/__pycache__/**,\
  **/.pytest_cache/**,\
  **/venv/**,\
  **/.venv/**,\
  **/venv-analysis/**,\
  **/build/**,\
  **/dist/**,\
  **/*.pyc

# Python
sonar.python.version=3.10
sonar.python.pylint.reportPaths=pylint-report.json

# TypeScript
sonar.typescript.node=/usr/bin/node
sonar.typescript.lcov.reportPaths=coverage/lcov.info

sonar.sourceEncoding=UTF-8

# DuplicaÃ§Ã£o
sonar.cpd.exclusions=**/migrations/**,**/legacy/**

# Coverage (futuro)
# sonar.python.coverage.reportPaths=coverage.xml

# Cognitive Complexity - Increase for analytics files
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.complexity.maximum=20

# Exclude analytics from strict complexity rules
# (Analytics scripts naturally have higher complexity)
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore cognitive complexity in analytics/
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e1.resourceKey=analytics/**/*.py

# Ignore duplicate literals in SQL files
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e2.resourceKey=analytics/**/*.sql

# Ignore generic exception catch in analytics
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S110
sonar.issue.ignore.multicriteria.e3.resourceKey=analytics/**/*.py
